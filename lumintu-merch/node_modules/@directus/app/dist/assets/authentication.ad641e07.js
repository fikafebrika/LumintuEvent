import{r,p as h,q as d,w as t,B as s,t as o,P as e}from"./vendor.a626ab9c.js";const c={class:"markdown-body"},u={class:"two-up"},p={class:"left"},_=e("By default, all data in the system is off limits for unauthenticated users. To gain access to protected data, you must include an access token with every request, or "),g=e("configure permissions for the public role"),f=e("."),v=s("div",{class:"right"},[s("p",null,[s("div",{class:"table-of-contents"},[s("ul",null,[s("li",null,[s("a",{href:"#login"},"Login")]),s("li",null,[s("a",{href:"#refresh"},"Refresh")]),s("li",null,[s("a",{href:"#logout"},"Logout")]),s("li",null,[s("a",{href:"#request-password-reset"},"Request Password Reset")]),s("li",null,[s("a",{href:"#reset-a-password"},"Reset a Password")]),s("li",null,[s("a",{href:"#list-auth-providers"},"List Auth Providers")]),s("li",null,[s("a",{href:"#login-using-sso-providers"},"Login Using SSO Providers")])])])])],-1),m=s("hr",null,null,-1),b=s("h2",{id:"login"},[e("Login "),s("a",{class:"header-anchor",href:"#login"},"#")],-1),w=s("p",null,"Retrieve a temporary access token and refresh token.",-1),k={class:"two-up"},q={class:"left"},j=s("h3",{id:"request-body"},[e("Request Body "),s("a",{class:"header-anchor",href:"#request-body"},"#")],-1),y=s("div",{class:"definitions"},[s("p",null,[s("code",null,"email"),e(),s("strong",null,"Required"),s("br"),e(" Email address of the user you\u2019re retrieving the access token for.")]),s("p",null,[s("code",null,"password"),e(),s("strong",null,"Required"),s("br"),e(" Password of the user.")]),s("p",null,[s("code",null,"otp"),s("br"),e(" The user\u2019s one-time-password (if MFA is enabled).")]),s("p",null,[s("code",null,"mode"),s("br"),e(" Whether to retrieve the refresh token in the JSON response, or in a "),s("code",null,"httpOnly"),e(),s("code",null,"secure"),e(" cookie. One of "),s("code",null,"json"),e(", "),s("code",null,"cookie"),e(". Defaults to "),s("code",null,"json"),e(".")])],-1),T=s("h3",{id:"response-attributes"},[e("Response Attributes "),s("a",{class:"header-anchor",href:"#response-attributes"},"#")],-1),P=s("div",{class:"definitions"},[s("p",null,[s("code",null,"access_token"),e(),s("strong",null,"string"),s("br"),e(" Temporary access token to be used in follow-up requests.")]),s("p",null,[s("code",null,"expires"),e(),s("strong",null,"integer"),s("br"),e(" How long before the access token will expire. Value is in milliseconds.")]),s("p",null,[s("code",null,"refresh_token"),e(),s("strong",null,"string"),s("br"),e(" The token that can be used to retrieve a new access token through "),s("a",{href:"#refresh"},[s("code",null,"/auth/refresh")]),e(". Note: if you used "),s("code",null,"cookie"),e(" as the mode in the request, the refresh token won\u2019t be returned in the JSON.")])],-1),R={class:"tip hint"},S=s("div",{class:"hint-title"},"Expiry time",-1),O=e("The token\u2019s expiration time can be configured through "),L=e("the "),A=s("code",null,"ACCESS_TOKEN_TTL",-1),x=e(" environment variable"),E=e("."),B=s("div",{class:"right"},[s("h3",{id:"rest-api"},[e("REST API "),s("a",{class:"header-anchor",href:"#rest-api"},"#")]),s("pre",null,[s("code",null,`POST /auth/login
`)]),s("pre",null,[s("code",null,`POST /auth/login/:provider
`)]),s("pre",null,[s("code",{class:"language-json"},[e(`{
	`),s("span",{class:"hljs-attr"},'"email"'),e(": "),s("span",{class:"hljs-string"},'"admin@example.com"'),e(`,
	`),s("span",{class:"hljs-attr"},'"password"'),e(": "),s("span",{class:"hljs-string"},'"d1r3ct5us"'),e(`
}
`)])]),s("h3",{id:"graphql"},[e("GraphQL "),s("a",{class:"header-anchor",href:"#graphql"},"#")]),s("pre",null,[s("code",null,`POST /graphql/system
`)]),s("pre",null,[s("code",{class:"language-graphql"},[s("span",{class:"hljs-keyword"},"mutation"),e(` {
	auth_login(email: `),s("span",{class:"hljs-string"},'"admin@example.com"'),e(", password: "),s("span",{class:"hljs-string"},'"d1r3ctu5"'),e(`) {
		access_token
		refresh_token
	}
}
`)])])],-1),N=s("hr",null,null,-1),G=s("h2",{id:"refresh"},[e("Refresh "),s("a",{class:"header-anchor",href:"#refresh"},"#")],-1),I=s("p",null,"Retrieve a new access token using a refresh token.",-1),C=s("div",{class:"two-up"},[s("div",{class:"left"},[s("h3",{id:"request-body-2"},[e("Request Body "),s("a",{class:"header-anchor",href:"#request-body-2"},"#")]),s("div",{class:"definitions"},[s("p",null,[s("code",null,"refresh_token"),s("br"),e(" The refresh token to use. If you have the refresh token in a cookie through "),s("a",{href:"#login"},[s("code",null,"/auth/login")]),e(", you don\u2019t have to submit it here.")])]),s("h3",{id:"response-attributes-2"},[e("Response Attributes "),s("a",{class:"header-anchor",href:"#response-attributes-2"},"#")]),s("div",{class:"definitions"},[s("p",null,[s("code",null,"access_token"),e(),s("strong",null,"string"),s("br"),e(" Temporary access token to be used in follow-up requests.")]),s("p",null,[s("code",null,"expires"),e(),s("strong",null,"integer"),s("br"),e(" How long before the access token will expire. Value is in milliseconds.")]),s("p",null,[s("code",null,"refresh_token"),e(),s("strong",null,"string"),s("br"),e(" The token that can be used to retrieve a new access token through "),s("a",{href:"#refresh"},[s("code",null,"/auth/refresh")]),e(". Note: if you used "),s("code",null,"cookie"),e(" as the mode in the request, the refresh token won\u2019t be returned in the JSON.")])])]),s("div",{class:"right"},[s("h3",{id:"rest-api-2"},[e("REST API "),s("a",{class:"header-anchor",href:"#rest-api-2"},"#")]),s("pre",null,[s("code",null,`POST /auth/refresh
`)]),s("pre",null,[s("code",{class:"language-json"},[e(`{
	`),s("span",{class:"hljs-attr"},'"refresh_token"'),e(": "),s("span",{class:"hljs-string"},'"gmPd...8wuB"'),e(`
}
`)])]),s("h3",{id:"graphql-2"},[e("GraphQL "),s("a",{class:"header-anchor",href:"#graphql-2"},"#")]),s("pre",null,[s("code",null,`POST /graphql/system
`)]),s("pre",null,[s("code",{class:"language-graphql"},[s("span",{class:"hljs-keyword"},"mutation"),e(` {
	auth_refresh(refresh_token: `),s("span",{class:"hljs-string"},'"abc...def"'),e(`) {
		access_token
		refresh_token
	}
}
`)])])])],-1),W=s("hr",null,null,-1),J=s("h2",{id:"logout"},[e("Logout "),s("a",{class:"header-anchor",href:"#logout"},"#")],-1),Q=s("p",null,"Invalidate the refresh token thus destroying the user\u2019s session.",-1),U=s("div",{class:"two-up"},[s("div",{class:"left"},[s("h3",{id:"request-body-3"},[e("Request Body "),s("a",{class:"header-anchor",href:"#request-body-3"},"#")]),s("div",{class:"definitions"},[s("p",null,[s("code",null,"refresh_token"),s("br"),e(" The refresh token to invalidate. If you have the refresh token in a cookie through "),s("a",{href:"#login"},[s("code",null,"/auth/login")]),e(", you don\u2019t have to submit it here.")])])]),s("div",{class:"right"},[s("h3",{id:"rest-api-3"},[e("REST API "),s("a",{class:"header-anchor",href:"#rest-api-3"},"#")]),s("pre",null,[s("code",null,`POST /auth/logout
`)]),s("pre",null,[s("code",{class:"language-json"},[e(`{
	`),s("span",{class:"hljs-attr"},'"refresh_token"'),e(": "),s("span",{class:"hljs-string"},'"gmPd...8wuB"'),e(`
}
`)])]),s("h3",{id:"graphql-3"},[e("GraphQL "),s("a",{class:"header-anchor",href:"#graphql-3"},"#")]),s("pre",null,[s("code",null,`POST /graphql/system
`)]),s("pre",null,[s("code",{class:"language-graphql"},[s("span",{class:"hljs-keyword"},"mutation"),e(` {
	auth_logout(refresh_token: `),s("span",{class:"hljs-string"},'"gmPd...8wuB"'),e(`)
}
`)])])])],-1),V=s("hr",null,null,-1),D=s("h2",{id:"request-password-reset"},[e("Request Password Reset "),s("a",{class:"header-anchor",href:"#request-password-reset"},"#")],-1),H=s("p",null,"Request a password reset email to be sent to the given user.",-1),K={class:"two-up"},F={class:"left"},M=s("h3",{id:"request-body-4"},[e("Request Body "),s("a",{class:"header-anchor",href:"#request-body-4"},"#")],-1),Y={class:"definitions"},z=s("p",null,[s("code",null,"email"),e(),s("strong",null,"Required"),s("br"),e(" Email address of the user you\u2019re requesting a password reset for.")],-1),X=s("code",null,"reset_url",-1),Z=s("br",null,null,-1),$=e(" Provide a custom reset url which the link in the email will lead to. The reset token will be passed as a parameter."),ss=s("br",null,null,-1),es=s("strong",null,"Note",-1),ts=e(": You need to configure the "),ns=s("code",null,"PASSWORD_RESET_URL_ALLOW_LIST",-1),os=e(" environment variable"),ls=e(" to enable this feature."),rs=s("div",{class:"right"},[s("h3",{id:"rest-api-4"},[e("REST API "),s("a",{class:"header-anchor",href:"#rest-api-4"},"#")]),s("pre",null,[s("code",null,`POST /auth/password/request
`)]),s("pre",null,[s("code",{class:"language-json"},[e(`{
	`),s("span",{class:"hljs-attr"},'"email"'),e(": "),s("span",{class:"hljs-string"},'"admin@example.com"'),e(`
}
`)])]),s("h3",{id:"graphql-4"},[e("GraphQL "),s("a",{class:"header-anchor",href:"#graphql-4"},"#")]),s("pre",null,[s("code",null,`POST /graphql/system
`)]),s("pre",null,[s("code",{class:"language-graphql"},[s("span",{class:"hljs-keyword"},"mutation"),e(` {
	auth_password_request(email: `),s("span",{class:"hljs-string"},'"admin@example.com"'),e(`)
}
`)])])],-1),as=s("hr",null,null,-1),is=s("h2",{id:"reset-a-password"},[e("Reset a Password "),s("a",{class:"header-anchor",href:"#reset-a-password"},"#")],-1),hs=s("p",null,"The request a password reset endpoint sends an email with a link to the admin app (or a custom route) which in turn uses this endpoint to allow the user to reset their password.",-1),ds=s("div",{class:"two-up"},[s("div",{class:"left"},[s("h3",{id:"request-body-5"},[e("Request Body "),s("a",{class:"header-anchor",href:"#request-body-5"},"#")]),s("div",{class:"definitions"},[s("p",null,[s("code",null,"token"),e(),s("strong",null,"Required"),s("br"),e(" Password reset token, as provided in the email sent by the request endpoint.")]),s("p",null,[s("code",null,"password"),e(),s("strong",null,"Required"),s("br"),e(" New password for the user.")])])]),s("div",{class:"right"},[s("h3",{id:"rest-api-5"},[e("REST API "),s("a",{class:"header-anchor",href:"#rest-api-5"},"#")]),s("pre",null,[s("code",null,`POST /auth/password/reset
`)]),s("pre",null,[s("code",{class:"language-json"},[e(`{
	`),s("span",{class:"hljs-attr"},'"token"'),e(": "),s("span",{class:"hljs-string"},'"eyJh...KmUk"'),e(`,
	`),s("span",{class:"hljs-attr"},'"password"'),e(": "),s("span",{class:"hljs-string"},'"d1r3ctu5"'),e(`
}
`)])]),s("h3",{id:"graphql-5"},[e("GraphQL "),s("a",{class:"header-anchor",href:"#graphql-5"},"#")]),s("pre",null,[s("code",null,`POST /graphql/system
`)]),s("pre",null,[s("code",{class:"language-graphql"},[s("span",{class:"hljs-keyword"},"mutation"),e(` {
	auth_password_reset(token: `),s("span",{class:"hljs-string"},'"eyJh...KmUk"'),e(", password: "),s("span",{class:"hljs-string"},'"d1r3ctu5"'),e(`)
}
`)])])])],-1),cs=s("hr",null,null,-1),us=s("h2",{id:"list-auth-providers"},[e("List Auth Providers "),s("a",{class:"header-anchor",href:"#list-auth-providers"},"#")],-1),ps=s("p",null,"List all the configured auth providers.",-1),_s={class:"two-up"},gs={class:"left"},fs={class:"tip hint"},vs=s("div",{class:"hint-title"},"Configuring auth providers",-1),ms=e("To learn more about setting up auth providers, see "),bs=e("Configuring auth providers"),ws=e("."),ks=s("h3",{id:"response-attributes-3"},[e("Response Attributes "),s("a",{class:"header-anchor",href:"#response-attributes-3"},"#")],-1),qs=s("div",{class:"definitions"},[s("p",null,[s("code",null,"data"),e(),s("strong",null,"Array"),s("br"),e(" Array of configured auth providers.")])],-1),js=s("div",{class:"right"},[s("pre",null,[s("code",null,`GET /auth
`)]),s("pre",null,[s("code",{class:"language-json"},[e(`{
	`),s("span",{class:"hljs-attr"},'"data"'),e(`: [
		{
			`),s("span",{class:"hljs-attr"},'"name"'),e(": "),s("span",{class:"hljs-string"},'"GitHub"'),e(`,
			`),s("span",{class:"hljs-attr"},'"driver"'),e(": "),s("span",{class:"hljs-string"},'"oauth2"'),e(`,
			`),s("span",{class:"hljs-attr"},'"icon"'),e(": "),s("span",{class:"hljs-string"},'"github"'),e(`
		},
		{
			`),s("span",{class:"hljs-attr"},'"name"'),e(": "),s("span",{class:"hljs-string"},'"Google"'),e(`,
			`),s("span",{class:"hljs-attr"},'"driver"'),e(": "),s("span",{class:"hljs-string"},'"openid"'),e(`,
			`),s("span",{class:"hljs-attr"},'"icon"'),e(": "),s("span",{class:"hljs-string"},'"google"'),e(`
		},
		{
			`),s("span",{class:"hljs-attr"},'"name"'),e(": "),s("span",{class:"hljs-string"},'"Okta"'),e(`,
			`),s("span",{class:"hljs-attr"},'"driver"'),e(": "),s("span",{class:"hljs-string"},'"openid"'),e(`
		}
	]
}
`)])])],-1),ys=s("hr",null,null,-1),Ts=s("h2",{id:"login-using-sso-providers"},[e("Login Using SSO Providers "),s("a",{class:"header-anchor",href:"#login-using-sso-providers"},"#")],-1),Ps=s("p",null,"Will redirect to the configured SSO provider for the user to login.",-1),Rs=s("div",{class:"two-up"},[s("div",{class:"right"},[s("pre",null,[s("code",null,`GET /auth/login/:provider
`)])])],-1),Ss=s("hr",null,null,-1),Es={setup(Os,{expose:a}){const l={title:"Authentication",modularExtension:!1,pageClass:"page-reference"};return a({frontmatter:l}),(Ls,As)=>{const n=r("router-link"),i=r("DocsWrapper");return h(),d(i,{frontmatter:l},{default:t(()=>[s("div",c,[s("div",u,[s("div",p,[s("blockquote",null,[s("p",null,[_,o(n,{to:"/docs/guides/roles-and-permissions"},{default:t(()=>[g]),_:1}),f])])]),v]),m,b,w,s("div",k,[s("div",q,[j,y,T,P,s("div",R,[S,s("p",null,[O,o(n,{to:"/docs/reference/environment-variables"},{default:t(()=>[L,A,x]),_:1}),E])])]),B]),N,G,I,C,W,J,Q,U,V,D,H,s("div",K,[s("div",F,[M,s("div",Y,[z,s("p",null,[X,Z,$,ss,es,ts,o(n,{to:"/docs/reference/environment-variables/#security"},{default:t(()=>[ns,os]),_:1}),ls])])]),rs]),as,is,hs,ds,cs,us,ps,s("div",_s,[s("div",gs,[s("div",fs,[vs,s("p",null,[ms,o(n,{to:"/docs/guides/api-config/#auth"},{default:t(()=>[bs]),_:1}),ws])]),ks,qs]),js]),ys,Ts,Ps,Rs,Ss])]),_:1})}}};export{Es as default};
